<h2>Select a Dilemma ðŸŒ¸</h2>
<select id="dilemmaSelect">
    <option value="I am unsure if lying to protect my friend is okay.">I am unsure if lying to protect my friend is okay.</option>
    <option value="Should I speak up about my colleagueâ€™s mistake even if it affects their promotion?">Should I speak up about my colleagueâ€™s mistake even if it affects their promotion?</option>
</select>

<textarea id="suggestText" rows="6" placeholder="Write your suggestion here..."></textarea><br><br>
<button onclick="submitSuggestion()">Submit Suggestion</button>

<script>
function submitSuggestion(){
    const text = document.getElementById("suggestText").value.trim();
    const dilemma_text = document.getElementById("dilemmaSelect").value;

    if(text.length < 5){
        alert("Suggestion too short.");
        return;
    }
    if(containsBannedWords(text)){
        alert("Unethical language detected. Revise your message.");
        return;
    }

    fetch("submit_suggestion.php", {
        method:"POST",
        headers: {"Content-Type":"application/x-www-form-urlencoded"},
        body: `text=${encodeURIComponent(text)}&dilemma_text=${encodeURIComponent(dilemma_text)}`
    })
    .then(res=>res.json())
    .then(data=>{
        alert(data.message);
        if(data.success) document.getElementById("suggestText").value="";
    })
    .catch(()=>alert("Submission failed. Try again later."));
}
</script>
